<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>YaZxDev Air Battle</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: sans-serif; }
    body, html { width: 100%; height: 100%; overflow: hidden; }
    video#bg-video {
      position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
      object-fit: cover; z-index: -1;
    }
    canvas { display: block; margin: auto; background: transparent; }
    .hud {
      position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
      display: flex; gap: 15px; background: rgba(0,0,0,0.6); padding: 8px 15px;
      border-radius: 10px; color: white; font-weight: bold;
    }
    #game-by, #music-btn {
      position: absolute; top: 70px;
      background: rgba(255,255,255,0.7); padding: 4px 10px;
      border-radius: 8px; font-weight: bold;
    }
   #game-by {
  position: absolute; top: 90px; left: 50%; transform: translateX(-50%);
  background: rgba(255,255,255,0.7); padding: 4px 8px;
  border-radius: 8px; font-weight: bold;
}
#music-btn {
  position: absolute; top: 90px; right: 10px;
  background: white; padding: 10px; border-radius: 50%; font-size: 20px;
}
    .joystick-container {
      position: absolute; bottom: 20px; left: 20%;
      transform: translateX(-50%);
      width: 100px; height: 100px;
      background: rgba(255,255,255,0.2);
      border-radius: 50%; touch-action: none;
      display: flex; align-items: center; justify-content: center;
      font-size: 40px;
    }
    .fire-btn {
      position: absolute; bottom: 20px; right: 20px;
      width: 80px; height: 80px; background: rgba(255,0,0,0.7);
      border-radius: 50%; color: white; font-size: 30px;
      display: flex; align-items: center; justify-content: center;
      touch-action: none;
    }
  </style>
</head>
<body>
<video id="bg-video" autoplay muted loop>
  <source src="https://files.catbox.moe/rn09rk.mp4" type="video/mp4" />
</video>
<canvas id="game" width="480" height="640"></canvas>
<div class="hud">
  <span>Nyawa lu: <span id="lives">üêíüêíüêí</span></span>
  <span>Score lu: <span id="score">0</span></span>
  <span>Level: <span id="level">1</span></span>
  <span>High Score: <span id="high-score">0</span></span>
  <span>Kalah: <span id="defeats">0</span></span>
</div>
<div id="game-by">Game by YaZxDev</div>
<div id="music-btn">üéµ</div>
<div class="joystick-container" id="joystick">üïπÔ∏è</div>
<div class="fire-btn" id="fire-btn">üî•</div>
<audio id="bg-music" src="https://files.catbox.moe/jev4p6.mp3" preload="auto" loop></audio>
<audio id="boom-sound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_52c3b8d4b5.mp3" preload="auto"></audio>
<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const music = document.getElementById("bg-music");
const musicBtn = document.getElementById("music-btn");
musicBtn.addEventListener("click", () => music.paused ? music.play() : music.pause());
const boomSound = document.getElementById("boom-sound");
const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const levelEl = document.getElementById("level");
const highScoreEl = document.getElementById("high-score");
const defeatsEl = document.getElementById("defeats");

let score = 0, lives = 3, level = 1;
let highScore = localStorage.getItem("highScore") || 0;
let defeats = localStorage.getItem("defeats") || 0;
highScoreEl.textContent = highScore;
defeatsEl.textContent = defeats;

const playerImg = new Image(); playerImg.src = "https://files.catbox.moe/98csxq.png";
const enemyImg = new Image(); enemyImg.src = "https://files.catbox.moe/ppne51.png";
const player = { x: 200, y: 500, width: 100, height: 100, speed: 4 };
const bullets = [], enemies = [], bosses = [];
let targetX = player.x, targetY = player.y;

function updateLivesDisplay() {
  livesEl.textContent = "üêí".repeat(lives);
}

function shoot() {
  bullets.push({ x: player.x + player.width/2 - 2, y: player.y, width: 4, height: 10 });
}
document.getElementById("fire-btn").addEventListener("click", shoot);
document.addEventListener("keydown", e => { if(e.key==" ") shoot(); });

function drawPlayer() {
  ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
}
function drawBullets() {
  ctx.fillStyle = "yellow";
  bullets.forEach((b,i) => {
    b.y -= 7;
    ctx.fillRect(b.x, b.y, b.width, b.height);
    if(b.y < 0) bullets.splice(i, 1);
  });
}
function spawnEnemies() {
  if (Math.random() < 0.02 + level * 0.005)
    enemies.push({ x: Math.random() * 440, y: -40, width: 100, height: 100, speed: 1 + level * 0.3 });
  if (level % 5 === 0 && bosses.length === 0)
    bosses.push({ x: 120, y: -100, width: 200, height: 100, hp: 20 + level * 5, speed: 1 });
}
function drawEnemies() {
  enemies.forEach((e,ei) => {
    e.y += e.speed;
    ctx.drawImage(enemyImg, e.x, e.y, e.width, e.height);
    if (e.y > canvas.height) enemies.splice(ei,1);
    if (collides(e, player)) damagePlayer(ei);
    bullets.forEach((b,bi) => {
      if (collides(b,e)) {
        boomSound.play(); bullets.splice(bi,1); enemies.splice(ei,1);
        updateScore(1);
      }
    });
  });
}
function drawBosses() {
  bosses.forEach((boss,bi) => {
    boss.y += boss.speed;
    ctx.fillStyle = "red";
    ctx.fillRect(boss.x, boss.y, boss.width, boss.height);
    bullets.forEach((b,bi2) => {
      if (collides(b,boss)) {
        bullets.splice(bi2,1); boss.hp -= 1;
        if (boss.hp <= 0) {
          boomSound.play(); bosses.splice(bi,1); updateScore(200); level++;
          levelEl.textContent = level;
        }
      }
    });
    if (collides(boss, player)) damagePlayer(bi);
  });
}
function collides(a,b) {
  return a.x < b.x + b.width && a.x + a.width > b.x &&
         a.y < b.y + b.height && a.y + a.height > b.y;
}
function damagePlayer(index) {
  boomSound.play(); enemies.splice(index,1);
  lives--; updateLivesDisplay();
  if (lives <= 0) resetGame();
}
function updateScore(val) {
  score += val; scoreEl.textContent = score;
  if (score > highScore) {
    highScore = score;
    localStorage.setItem("highScore", highScore);
    highScoreEl.textContent = highScore;
  }
}
function resetGame() {
  defeats++;
  localStorage.setItem("defeats", defeats);
  defeatsEl.textContent = defeats;
  alert(`Yahh Tololl Ga Bisa Main Goblok!\nScore luu: ${score}`);
  lives = 3; score = 0; level = 1;
  bullets.length = 0; enemies.length = 0; bosses.length = 0;
  updateLivesDisplay();
  scoreEl.textContent = score;
  levelEl.textContent = level;
}
function gameLoop() {
  player.x += (targetX - player.x) * 0.1;
  player.y += (targetY - player.y) * 0.1;
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawPlayer(); drawBullets(); spawnEnemies(); drawEnemies(); drawBosses();
  requestAnimationFrame(gameLoop);
}
let joystick = document.getElementById("joystick"), dragging = false, origin = {x:0,y:0};
joystick.addEventListener("touchstart", e => {
  dragging = true;
  origin.x = e.touches[0].clientX;
  origin.y = e.touches[0].clientY;
});
joystick.addEventListener("touchmove", e => {
  if (!dragging) return;
  let dx = e.touches[0].clientX - origin.x;
  let dy = e.touches[0].clientY - origin.y;
  targetX += dx * 0.8; targetY += dy * 0.8;
  targetX = Math.max(0, Math.min(canvas.width - player.width, targetX));
  targetY = Math.max(0, Math.min(canvas.height - player.height, targetY));
  origin.x = e.touches[0].clientX;
  origin.y = e.touches[0].clientY;
});
joystick.addEventListener("touchend", () => dragging = false);
updateLivesDisplay();
gameLoop();
</script>
</body>
</html>